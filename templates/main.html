{% extends "base.html" %}

{% block main_content %}

<!-- Wellesley Feast Banner -->
{% if feast_events %}
  <section class="feast-banner">
    <h2>Wellesley Feast Free Food Alerts!</h2>

    {% for nid, time, location, description in feast_events %}
      <div class="feast-card">
        <strong>{{ description }}</strong><br>
        <span>Where: {{ location }}</span><br>
        <span>When: {{ time }}</span>
      </div>
    {% endfor %}
  </section>
{% endif %}

<!-- Loader -->
<div id="menu-loader" class="menu-loader">
  Loading menusâ€¦
</div>

<div class="menu-page">

  <!-- Header pill for 'Today' / week -->
  <div class="menu-header">
    <span class="menu-header-pill">This Week</span>
  </div>

  <div class="days-wrapper">
    {% for day in days %}
      <section class="day-card">
        <div class="day-title-row">
          <h2 class="day-label">
            {% if loop.index0 == 0 %}
              Today
            {% else %}
              {{ day.date.strftime("%A") }}
            {% endif %}
          </h2>
          <span class="day-date">{{ day.date.strftime("%b %-d") }}</span>
        </div>

        {% for meal in meal_order %}
          {% set halls = day.menus.get(meal, {}) %}
          {% if halls %}
            <div class="meal-section">
              <h3 class="meal-name">{{ meal }}</h3>

              <div class="halls-row">
                {% for hall_name, dishes in halls.items() %}
                  <article class="hall-card">
                    <div class="hall-header">
                      <span class="hall-name">{{ hall_name }}</span>
                    </div>
                    <ul class="dish-list">
                      {% for dish in dishes %}
                        <li class="dish-item">
                          <a href="{{ url_for('get_dish', did=dish.did if dish.did is defined else dish['did']) }}">
                            {{ dish.name if dish.name is defined else dish['name'] }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  </article>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </section>
    {% endfor %}
  </div>

</div>
{% endblock %}
