<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name=author content="Dora, Joey, Zoe">
  <title>{{ page_title }}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Comfortaa:wght@300;400;500;600;700&family=Fredoka+One&family=Great+Vibes&family=Dancing+Script:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700;800&family=Bubblegum+Sans&display=swap" rel="stylesheet">
  <link rel='stylesheet' href="{{url_for('static', filename = 'style.css')}}">
  {% block head_stuff %}{% endblock %}
</head>
<body>

{% block nav %}
<nav>
  <ul>
    <li><a href="{{ url_for('about') }}">About</a></li>
    <li><a href="{{ url_for('index') }}">Menu</a></li>
    <li><a href="{{ url_for('dishdash') }}">DishDash</a></li>
    <!-- final list item that triggers the sidebar -->
    <li><a href="#" id="feastLink">Wellesley Feast</a></li>
  </ul>
</nav>
{% endblock %}

<!-- Wellesley Feast Sidebar -->
<div id="feastSidebar" class="sidebar">
 <div class="sidebar-header">
   <h3>Wellesley Feast</h3>
   <button id="closeFeast" class="close-btn">&times;</button>
 </div>
 <div class="sidebar-body">
   <p>Broadcast free food events on campus!</p>
   <form method="POST" action="{{ url_for('index') }}">
     <p><label for="free_food">Free Food</label></p>
     <input type="text" id="free_food" name="free_food" required>
     <p><label for="location">Where </label></p>
     <input type="text" id="location" name="location" required>
     <p><label for="time_text">When</label></p>
     <input type="text" id="time_text" name="time_text" required>
     <p><label for="description2">Details (optional)</label></p>
     <textarea id="description2" name="description2"></textarea>
     <button type="submit">Submit</button>
   </form>
 </div>
</div>

{% with messages = get_flashed_messages() %}
 {% if messages %}
   <div id="messages">
     {% for msg in messages %}
       <p>{{ msg | replace('\n', '<br>') | safe }}</p>
     {% endfor %}
   </div>
 {% endif %}
{% endwith %}


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const loader = document.getElementById("menu-loader");
    const content = document.getElementById("menu-content");
    if (loader) loader.style.display = "none";
    if (content) content.style.display = "block";
  });
</script>


{% block main_content %}
<h1>Welcome!</h1>
{% endblock %}

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script>
  const feastLink = document.getElementById('feastLink');
  const feastSidebar = document.getElementById('feastSidebar');
  const closeFeast = document.getElementById('closeFeast');

  // open sidebar when clicking nav item
  feastLink.addEventListener('click', (e) => {
    e.preventDefault();               // don't navigate to "#"
    feastSidebar.classList.add('open');
  });

  // close sidebar when clicking X
  closeFeast.addEventListener('click', () => {
    feastSidebar.classList.remove('open');
  });
</script>


{% block end_scripts %}{% endblock %}

</body>
</html>
